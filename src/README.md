# Скрипты обработки данных

## Скрипты

### `parse_xml_to_csv.py`
**Назначение:** Парсинг XML датасета и конвертация в CSV/Parquet форматы.

**Использование:**
```bash
python src/parse_xml_to_csv.py
```

**Что делает:**
- Парсит `dataset/all.xml`
- Извлекает все поля стихотворений (author, name, text, dates, themes)
- Вычисляет средний год написания (`year`)
- Сохраняет результат в:
  - `dataset/poems.csv` - человекочитаемый формат
  - `dataset/poems.parquet` - оптимизированный формат (экономия 45%)
- Выводит статистику по датасету

**Результат:**
- 16,694 стихотворений
- 195 авторов
- Период: 1725-1996
- 77% стихотворений имеют даты

---

### `example_load_data.py`
**Назначение:** Примеры загрузки и базовой работы с датасетом.

**Использование:**
```bash
python src/example_load_data.py
```

**Что показывает:**
- Как загрузить данные из CSV или Parquet
- Фильтрация по автору и периоду
- Базовая статистика
- Примеры анализа

---

## Структура данных

После парсинга датасет имеет следующие колонки:

| Колонка    | Тип    | Описание                                    | Пример                    |
|------------|--------|---------------------------------------------|---------------------------|
| author     | str    | Имя автора                                  | "Александр Пушкин"        |
| name       | str    | Название стихотворения                      | "Я помню чудное мгновенье"|
| text       | str    | Полный текст стихотворения                  | "Я помню чудное..."       |
| date_from  | str    | Год начала написания (может быть пустым)    | "1825"                    |
| date_to    | str    | Год окончания написания (может быть пустым) | "1825"                    |
| themes     | str    | Темы через запятую (может быть пустым)      | "О любви, Романтизм"      |
| year       | float  | Средний год написания для анализа           | 1825.0                    |

---

## Быстрый старт

### 1. Активация виртуального окружения
```bash
source venv/bin/activate
```

### 2. Загрузка данных в Python
```python
import pandas as pd

# Быстрая загрузка (рекомендуется)
df = pd.read_parquet('dataset/poems.parquet')

# Или из CSV
df = pd.read_csv('dataset/poems.csv')
```

### 3. Базовый анализ
```python
# Фильтрация по автору
pushkin = df[df['author'] == 'Александр Пушкин']

# Фильтрация по периоду
golden_age = df[(df['year'] >= 1820) & (df['year'] < 1840)]

# Группировка по десятилетиям
df['decade'] = (df['year'] // 10) * 10
decade_counts = df.groupby('decade').size()
```

